{% extends "base.html" %}
{% block stylesheet %}
    <link rel="stylesheet" href="{{ url_for('.static', filename='timeline.css') }}">
{% endblock %}

{% block content %}
    {% from "_appointment_list_item.html" import appointment_list_item %}
    {% from "_appointment_timeline_item.html" import appointment_timeline_item %}

    <h1 class="title has-text-centered">
        Termini
    </h1>
    <div class="container is-max-desktop">
        <hr>
        <div class="timeline">
            {% for year in schedule %}
                <header class="timeline-header">
                    <span class="tag is-large is-info">{{ year }}</span>
                </header>
                {% for month in schedule[year] %}
                    <header class="timeline-header">
                        <span class="tag is-primary">{{ month }}</span>
                    </header>
                    {% for day in schedule[year][month] %}
                        <div class="timeline-item">
                            <div class="timeline-marker is-primary"></div>
                            <div class="timeline-content">
                                <p class="heading">{{ day }}. {{ month }}</p>
                                {% for appointment in appointment_list %}
                                    {% if day == appointment.time_of_appointment.day and month == appointment.time_of_appointment.strftime('%B') and year == appointment.time_of_appointment.year %}
                                        {{ appointment_timeline_item(appointment) }}
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    {% endfor %}
                {% endfor %}
            {% endfor %}
        </div>
    </div>
{% endblock %}

